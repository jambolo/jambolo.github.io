<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Confetti: Effect of Drag on Particle Motion</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Confetti
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Particle System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Effect of Drag on Particle Motion </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview </h2>
<p>This paper describes the derivation and application of the effect of drag on the position and velocity of each particle.</p>
<h2>Foundations </h2>
<p>Drag is a force due to friction between the particle and the medium that it travels through. The force is in the opposite direction of the motion and is proportional to the square of the speed. Drag is defined by the following equation: </p><pre class="fragment">D = -Cd * r * s^2 * A / 2
</pre><p>where,</p>
<ul>
<li><em>Cd</em> is the "coefficient of drag"</li>
<li><em>r</em> is the density of the medium</li>
<li><em>s</em> is the speed of the particle</li>
<li><em>A</em> is the equivalent area of the particle</li>
</ul>
<p>Including the acceleration due to gravity, <em>g</em>, the overall acceleration is: </p><pre class="fragment">g + D/m
</pre><p>In this particle system, the mass of a particle is fixed at 1. However, because the acceleration due to drag is proportional to the mass, the actual mass can be accounted for by changing the value of <em>c</em>.</p>
<p>The velocity of the particle at time <em>t</em> is given by this equation (<a href="https://en.wikipedia.org/wiki/Drag_(physics)#Velocity_of_a_falling_object">https://en.wikipedia.org/wiki/Drag_(physics)#Velocity_of_a_falling_object</a>): </p><pre class="fragment">v = Vt tanh(t * g / Vt + atanh(V0 / Vt))
</pre><p>where <em>V0</em> is the initial velocity and <em>Vt</em> is the terminal velocity computed as: </p><pre class="fragment">Vt = sqrt(2 * m * g / (r * A * Cd))
</pre><p>The equations can be simplified by assuming that <em>Cd</em>, <em>r</em>, and <em>A</em> are constant, allowing them to be combined into a single constant: </p><pre class="fragment">c = Cd * r * A / 2
</pre><p>This gives: </p><pre class="fragment">D = c * s^2
Vt = sqrt(g / c)
</pre><p>The distance traveled after time <em>t</em> is given by this equation: </p><pre class="fragment">d = Vt^2 / 2g * (2 ln(cosh((gt + Vt * atanh(V0/Vt)) / Vt) * (Vt^2-V0^2)/Vt^2))
</pre><p>These computations all assume that the velocity is always in the direction of gravity. If the initial velocity is not in the same direction, then the computation is slightly more complicated. Note that because <em>D</em> is derived from the square of the speed, it can be split into the sum of two vectors: </p><pre class="fragment">D = Dg + Df
</pre><p>where <em>Dg</em> is the drag in the direction of gravity and <em>Df</em> is the perpendicular drag.</p>
<p>Without the acceleration due to gravity, the perpendicular velocity is simply </p><pre class="fragment">Vf = V0f / (V0f * t + 1)
</pre><p>The velocities in each direction are independent so they can be combined: </p><pre class="fragment">V = V0f / (V0f * t + 1) + Vt tanh(t * g / Vt + atanh(V0g / Vt))
</pre><h2>Implementation </h2>
<p>Calculating the position is expensive. This is a visual simulation and it is assumed that a particle does not need to follow its path precisely. So, a basic Euler method is used to calculate the position: </p><pre class="fragment">p(i) = p(i-1) + v(i) * dt
</pre><p><em>v(i)</em> is computed using the formula above using v(i-1) as <em>V0</em>. Here is the code:</p>
<p>Computed once: </p><pre class="fragment">direction_g = normalize(g)
direction_f = [direction_g.y, -direction_g.x]
Vt = direction_g * sqrt(|g| / c)
</pre><p>Computed each update: </p><pre class="fragment">V0g = direction_g * dot(v(i-1), direction_g)
V0f = direction_f * dot(v(i-1), direction_f)
Vg = Vt * tanh(t * g / |Vt| + atanh(|V0g| / |Vt|))
Vf = direction_f * (|V0f| / (|V0f| * t + 1))
v(i) = Vf + Vg</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
